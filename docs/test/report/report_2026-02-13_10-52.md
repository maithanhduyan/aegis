# AegisOS Test Report

| Thuộc tính | Giá trị |
|---|---|
| **Ngày** | 2026-02-13 10:52 |
| **Hệ điều hành** | Windows |
| **Rust toolchain** | nightly-1.95.0 (18d13b533 2026-02-09) |
| **Commit** | 72456ae |
| **Kết quả tổng** | ✅ ALL PASS |

---

## 1. Host Unit Tests

**Lệnh:** `cargo test --target x86_64-pc-windows-msvc --lib --test host_tests -- --test-threads=1`
**Kết quả:** 250 passed, 0 failed — ⏱ 0.12s

### Chi tiết

| # | Test | Nhóm | Kết quả |
|---|---|---|---|
| 1 | `addr_asid_zero_reserved_for_kernel` | Address Space | ✅ |
| 2 | `addr_different_asids_produce_different_ttbr0` | Address Space | ✅ |
| 3 | `addr_empty_tcb_has_zero_ttbr0` | Address Space | ✅ |
| 4 | `addr_max_asid_fits_in_8_bits` | Address Space | ✅ |
| 5 | `addr_page_table_base_is_4k_aligned` | Address Space | ✅ |
| 6 | `addr_page_table_base_returns_distinct_per_task` | Address Space | ✅ |
| 7 | `addr_schedule_preserves_ttbr0_in_tcb` | Address Space | ✅ |
| 8 | `addr_ttbr0_for_task_embeds_asid` | Address Space | ✅ |
| 9 | `addr_ttbr0_preserves_base_address` | Address Space | ✅ |
| 10 | `addr_ttbr0_survives_restart` | Address Space | ✅ |
| 11 | `cap_all_includes_device_map` | Capabilities | ✅ |
| 12 | `cap_all_includes_every_bit` | Capabilities | ✅ |
| 13 | `cap_all_includes_grants` | Capabilities | ✅ |
| 14 | `cap_all_includes_heartbeat` | Capabilities | ✅ |
| 15 | `cap_all_includes_irq` | Capabilities | ✅ |
| 16 | `cap_bits_are_distinct_powers_of_two` | Capabilities | ✅ |
| 17 | `cap_check_multi_bit_requirement` | Capabilities | ✅ |
| 18 | `cap_check_single_bit` | Capabilities | ✅ |
| 19 | `cap_check_zero_required_always_passes` | Capabilities | ✅ |
| 20 | `cap_empty_tcb_has_zero_caps` | Capabilities | ✅ |
| 21 | `cap_exit_bit_18` | Capabilities | ✅ |
| 22 | `cap_exit_denied_without_cap` | Capabilities | ✅ |
| 23 | `cap_exit_granted_with_cap` | Capabilities | ✅ |
| 24 | `cap_exit_in_cap_all` | Capabilities | ✅ |
| 25 | `cap_for_syscall_all_endpoints` | Capabilities | ✅ |
| 26 | `cap_for_syscall_call_needs_both` | Capabilities | ✅ |
| 27 | `cap_for_syscall_device_map` | Capabilities | ✅ |
| 28 | `cap_for_syscall_ep2_ep3` | Capabilities | ✅ |
| 29 | `cap_for_syscall_exit` | Capabilities | ✅ |
| 30 | `cap_for_syscall_grant` | Capabilities | ✅ |
| 31 | `cap_for_syscall_grant_irq_device` | Capabilities | ✅ |
| 32 | `cap_for_syscall_heartbeat` | Capabilities | ✅ |
| 33 | `cap_for_syscall_invalid_returns_zero` | Capabilities | ✅ |
| 34 | `cap_for_syscall_irq` | Capabilities | ✅ |
| 35 | `cap_for_syscall_send_recv` | Capabilities | ✅ |
| 36 | `cap_for_syscall_write` | Capabilities | ✅ |
| 37 | `cap_for_syscall_yield` | Capabilities | ✅ |
| 38 | `cap_heartbeat_bit_is_power_of_two` | Capabilities | ✅ |
| 39 | `cap_heartbeat_is_bit_17` | Capabilities | ✅ |
| 40 | `cap_name_all_missing_arms` | Capabilities | ✅ |
| 41 | `cap_name_exit` | Capabilities | ✅ |
| 42 | `cap_name_heartbeat` | Capabilities | ✅ |
| 43 | `cap_name_returns_expected_strings` | Capabilities | ✅ |
| 44 | `cap_none_grants_nothing` | Capabilities | ✅ |
| 45 | `cap_survives_restart_simulation` | Capabilities | ✅ |
| 46 | `device_map_invalid_device_id` | Device Map | ✅ |
| 47 | `device_map_invalid_task_id` | Device Map | ✅ |
| 48 | `device_map_valid_uart` | Device Map | ✅ |
| 49 | `device_registry_uart_l2_index` | Device Map | ✅ |
| 50 | `elf_load_segments_copy_and_zero` | ELF Loader | ✅ |
| 51 | `elf_load_segments_rejects_invalid` | ELF Loader | ✅ |
| 52 | `elf_parse_bad_magic` | ELF Parser | ✅ |
| 53 | `elf_parse_entry_point` | ELF Parser | ✅ |
| 54 | `elf_parse_no_segments` | ELF Parser | ✅ |
| 55 | `elf_parse_not_64bit` | ELF Parser | ✅ |
| 56 | `elf_parse_not_executable` | ELF Parser | ✅ |
| 57 | `elf_parse_not_little_endian` | ELF Parser | ✅ |
| 58 | `elf_parse_segment_out_of_bounds` | ELF Parser | ✅ |
| 59 | `elf_parse_too_many_segments` | ELF Parser | ✅ |
| 60 | `elf_parse_too_small` | ELF Parser | ✅ |
| 61 | `elf_parse_valid_multiple_segments` | ELF Parser | ✅ |
| 62 | `elf_parse_valid_single_segment` | ELF Parser | ✅ |
| 63 | `elf_parse_wrong_arch` | ELF Parser | ✅ |
| 64 | `elf_validate_for_load_entry_out_of_range` | ELF Loader | ✅ |
| 65 | `elf_validate_for_load_no_segments` | ELF Loader | ✅ |
| 66 | `elf_validate_for_load_segment_too_large` | ELF Loader | ✅ |
| 67 | `elf_validate_for_load_vaddr_below_base` | ELF Loader | ✅ |
| 68 | `elf_validate_for_load_valid` | ELF Loader | ✅ |
| 69 | `elf_validate_for_load_wx_violation` | ELF Loader | ✅ |
| 70 | `exited_task_not_auto_restarted` | Scheduler | ✅ |
| 71 | `exited_task_skipped_by_scheduler` | Scheduler | ✅ |
| 72 | `grant_cleanup_clears_both_roles` | Grants | ✅ |
| 73 | `grant_cleanup_owner_faulted` | Grants | ✅ |
| 74 | `grant_cleanup_peer_faulted` | Grants | ✅ |
| 75 | `grant_create_duplicate_rejected` | Grants | ✅ |
| 76 | `grant_create_invalid_id` | Grants | ✅ |
| 77 | `grant_create_invalid_peer` | Grants | ✅ |
| 78 | `grant_create_self_grant_rejected` | Grants | ✅ |
| 79 | `grant_create_success` | Grants | ✅ |
| 80 | `grant_page_addr_invalid` | Grants | ✅ |
| 81 | `grant_page_addr_valid` | Grants | ✅ |
| 82 | `grant_re_create_after_revoke` | Grants | ✅ |
| 83 | `grant_revoke_by_non_owner_rejected` | Grants | ✅ |
| 84 | `grant_revoke_by_owner` | Grants | ✅ |
| 85 | `grant_revoke_inactive_is_noop` | Grants | ✅ |
| 86 | `grant_revoke_invalid_id` | Grants | ✅ |
| 87 | `grant_two_grants_independent` | Grants | ✅ |
| 88 | `idle_task_id_is_last` | Scheduler | ✅ |
| 89 | `ipc_cleanup_all_four_endpoints` | IPC | ✅ |
| 90 | `ipc_cleanup_clears_both_endpoints` | IPC | ✅ |
| 91 | `ipc_cleanup_clears_receiver_slot` | IPC | ✅ |
| 92 | `ipc_cleanup_clears_sender_slot` | IPC | ✅ |
| 93 | `ipc_cleanup_doesnt_affect_other_tasks` | IPC | ✅ |
| 94 | `ipc_copy_message` | IPC | ✅ |
| 95 | `ipc_endpoint_initial_state` | IPC | ✅ |
| 96 | `ipc_four_endpoints_exist` | IPC | ✅ |
| 97 | `ipc_max_endpoints` | IPC | ✅ |
| 98 | `ipc_msg_regs_count` | IPC | ✅ |
| 99 | `ipc_recv_loads_frame_on_immediate` | IPC | ✅ |
| 100 | `ipc_round_trip_message_integrity` | IPC | ✅ |
| 101 | `ipc_send_restores_receiver_priority` | IPC | ✅ |
| 102 | `ipc_sys_call_invalid_endpoint` | IPC | ✅ |
| 103 | `ipc_sys_call_no_receiver` | IPC | ✅ |
| 104 | `ipc_sys_call_priority_boost` | IPC | ✅ |
| 105 | `ipc_sys_call_queue_full` | IPC | ✅ |
| 106 | `ipc_sys_call_with_receiver_waiting` | IPC | ✅ |
| 107 | `ipc_sys_recv_blocks_when_no_sender` | IPC | ✅ |
| 108 | `ipc_sys_recv_immediate_delivery` | IPC | ✅ |
| 109 | `ipc_sys_recv_invalid_endpoint` | IPC | ✅ |
| 110 | `ipc_sys_send_blocks_when_no_receiver` | IPC | ✅ |
| 111 | `ipc_sys_send_immediate_delivery` | IPC | ✅ |
| 112 | `ipc_sys_send_invalid_endpoint` | IPC | ✅ |
| 113 | `ipc_sys_send_queue_full` | IPC | ✅ |
| 114 | `irq_ack_already_acked_is_noop` | IRQ Routing | ✅ |
| 115 | `irq_ack_not_bound` | IRQ Routing | ✅ |
| 116 | `irq_ack_success` | IRQ Routing | ✅ |
| 117 | `irq_ack_wrong_task` | IRQ Routing | ✅ |
| 118 | `irq_bind_reject_duplicate` | IRQ Routing | ✅ |
| 119 | `irq_bind_reject_ppi` | IRQ Routing | ✅ |
| 120 | `irq_bind_reject_zero_bit` | IRQ Routing | ✅ |
| 121 | `irq_bind_success` | IRQ Routing | ✅ |
| 122 | `irq_bind_table_full` | IRQ Routing | ✅ |
| 123 | `irq_cleanup_does_not_affect_other_tasks` | IRQ Routing | ✅ |
| 124 | `irq_cleanup_unbinds_all` | IRQ Routing | ✅ |
| 125 | `irq_rebind_after_cleanup` | IRQ Routing | ✅ |
| 126 | `irq_route_accumulates_bits` | IRQ Routing | ✅ |
| 127 | `irq_route_sets_notify_pending` | IRQ Routing | ✅ |
| 128 | `irq_route_unblocks_waiting_task` | IRQ Routing | ✅ |
| 129 | `kernel_cell_as_ptr_stable` | KernelCell / Logging / UART | ✅ |
| 130 | `kernel_cell_get_read` | KernelCell / Logging / UART | ✅ |
| 131 | `kernel_cell_get_then_get_mut_roundtrip` | KernelCell / Logging / UART | ✅ |
| 132 | `klog_macro_compiles` | KernelCell / Logging / UART | ✅ |
| 133 | `l6_arch_module_exists` | L6 Integration | ✅ |
| 134 | `l6_cfg_separation_works` | L6 Integration | ✅ |
| 135 | `l6_elf_wxn_flag_properties` | L6 Integration | ✅ |
| 136 | `l6_kernel_module_exports` | L6 Integration | ✅ |
| 137 | `l6_platform_constants` | L6 Integration | ✅ |
| 138 | `l6_use_paths_unchanged` | L6 Integration | ✅ |
| 139 | `log_level_ordering` | KernelCell / Logging / UART | ✅ |
| 140 | `log_message_basic` | KernelCell / Logging / UART | ✅ |
| 141 | `log_prefix_all_levels` | KernelCell / Logging / UART | ✅ |
| 142 | `mmu_access_flag` | MMU Descriptors | ✅ |
| 143 | `mmu_access_permissions` | MMU Descriptors | ✅ |
| 144 | `mmu_attr_indices` | MMU Descriptors | ✅ |
| 145 | `mmu_device_block_has_af` | MMU Descriptors | ✅ |
| 146 | `mmu_device_block_is_el1_only` | MMU Descriptors | ✅ |
| 147 | `mmu_device_block_is_non_executable` | MMU Descriptors | ✅ |
| 148 | `mmu_execute_never_bits` | MMU Descriptors | ✅ |
| 149 | `mmu_kernel_data_page_is_el1_only` | MMU Descriptors | ✅ |
| 150 | `mmu_kernel_data_page_is_non_executable` | MMU Descriptors | ✅ |
| 151 | `mmu_set_page_attr_host_stub` | MMU Descriptors | ✅ |
| 152 | `mmu_shareability` | MMU Descriptors | ✅ |
| 153 | `mmu_shared_code_page_is_executable` | MMU Descriptors | ✅ |
| 154 | `mmu_shared_code_page_is_readonly` | MMU Descriptors | ✅ |
| 155 | `mmu_table_vs_block_vs_page` | MMU Descriptors | ✅ |
| 156 | `mmu_user_code_page_el0_exec_only` | MMU Descriptors | ✅ |
| 157 | `mmu_user_data_page_is_el0_accessible` | MMU Descriptors | ✅ |
| 158 | `mmu_user_data_page_is_non_executable` | MMU Descriptors | ✅ |
| 159 | `mmu_valid_bit` | MMU Descriptors | ✅ |
| 160 | `mmu_wxn_invariant` | MMU Descriptors | ✅ |
| 161 | `notify_cap_for_syscall_notify` | Notifications | ✅ |
| 162 | `notify_cap_for_syscall_wait_notify` | Notifications | ✅ |
| 163 | `notify_cleared_on_restart` | Notifications | ✅ |
| 164 | `notify_empty_tcb_has_no_pending` | Notifications | ✅ |
| 165 | `notify_pending_cleared_on_read` | Notifications | ✅ |
| 166 | `notify_pending_or_merge` | Notifications | ✅ |
| 167 | `notify_waiting_flag` | Notifications | ✅ |
| 168 | `page_table_constants_computed` | Multi-ELF / Misc | ✅ |
| 169 | `sched_auto_restart_after_delay` | Scheduler | ✅ |
| 170 | `sched_budget_exhausted_skips_task` | Scheduler | ✅ |
| 171 | `sched_context_save_restore` | Scheduler | ✅ |
| 172 | `sched_empty_tcb_is_zeroed` | Scheduler | ✅ |
| 173 | `sched_empty_tcb_phase_k_fields_zeroed` | Scheduler | ✅ |
| 174 | `sched_epoch_length_constant` | Scheduler | ✅ |
| 175 | `sched_epoch_reset_clears_ticks` | Scheduler | ✅ |
| 176 | `sched_fault_current_task_basic` | Scheduler | ✅ |
| 177 | `sched_fault_current_task_cleans_irq` | Scheduler | ✅ |
| 178 | `sched_get_set_task_reg` | Scheduler | ✅ |
| 179 | `sched_get_task_base_priority` | Scheduler | ✅ |
| 180 | `sched_get_task_base_priority_out_of_range` | Scheduler | ✅ |
| 181 | `sched_get_task_priority` | Scheduler | ✅ |
| 182 | `sched_get_task_priority_out_of_range` | Scheduler | ✅ |
| 183 | `sched_heartbeat_reset_on_restart` | Scheduler | ✅ |
| 184 | `sched_idle_fallback` | Scheduler | ✅ |
| 185 | `sched_num_tasks` | Scheduler | ✅ |
| 186 | `sched_out_of_range_set_priority_is_noop` | Scheduler | ✅ |
| 187 | `sched_priority_higher_wins` | Scheduler | ✅ |
| 188 | `sched_priority_restored_on_fault` | Scheduler | ✅ |
| 189 | `sched_record_heartbeat` | Scheduler | ✅ |
| 190 | `sched_record_heartbeat_disable` | Scheduler | ✅ |
| 191 | `sched_restart_delay` | Scheduler | ✅ |
| 192 | `sched_restart_task_non_faulted_noop` | Scheduler | ✅ |
| 193 | `sched_restore_base_priority` | Scheduler | ✅ |
| 194 | `sched_restore_base_priority_out_of_range` | Scheduler | ✅ |
| 195 | `sched_round_robin_all_ready` | Scheduler | ✅ |
| 196 | `sched_same_priority_round_robin` | Scheduler | ✅ |
| 197 | `sched_save_load_frame` | Scheduler | ✅ |
| 198 | `sched_schedule_idle_faulted_gets_restarted` | Scheduler | ✅ |
| 199 | `sched_schedule_no_ready_task_forces_idle` | Scheduler | ✅ |
| 200 | `sched_set_task_priority` | Scheduler | ✅ |
| 201 | `sched_set_task_priority_out_of_range` | Scheduler | ✅ |
| 202 | `sched_set_task_state_out_of_range` | Scheduler | ✅ |
| 203 | `sched_skip_blocked_task` | Scheduler | ✅ |
| 204 | `sched_skip_faulted_task` | Scheduler | ✅ |
| 205 | `sched_task_state_values` | Scheduler | ✅ |
| 206 | `sched_tcb_size` | Scheduler | ✅ |
| 207 | `sched_ticks_used_reset_on_restart` | Scheduler | ✅ |
| 208 | `sched_unlimited_budget_never_exhausted` | Scheduler | ✅ |
| 209 | `sched_watchdog_scan_no_violation` | Scheduler | ✅ |
| 210 | `sched_watchdog_scan_period_constant` | Scheduler | ✅ |
| 211 | `sched_watchdog_scan_skips_already_faulted` | Scheduler | ✅ |
| 212 | `sched_watchdog_scan_skips_disabled` | Scheduler | ✅ |
| 213 | `sched_watchdog_scan_violation_faults_task` | Scheduler | ✅ |
| 214 | `sender_queue_contains` | IPC | ✅ |
| 215 | `sender_queue_full_rejects` | IPC | ✅ |
| 216 | `sender_queue_push_pop_fifo` | IPC | ✅ |
| 217 | `sender_queue_remove_middle` | IPC | ✅ |
| 218 | `sender_queue_wrap_around` | IPC | ✅ |
| 219 | `task_state_exited_distinct` | Scheduler | ✅ |
| 220 | `task_state_exited_value` | Scheduler | ✅ |
| 221 | `test_budget_epoch_reset_fairness_logic` | Phase P Pure Logic | ✅ |
| 222 | `test_grant_cleanup_completeness_logic` | Phase P Pure Logic | ✅ |
| 223 | `test_grant_create_validates_correctly` | Phase P Pure Logic | ✅ |
| 224 | `test_grant_slot_exhaustion_safe_logic` | Phase P Pure Logic | ✅ |
| 225 | `test_irq_bind_no_duplicate_intid_logic` | Phase P Pure Logic | ✅ |
| 226 | `test_irq_cleanup_no_orphaned_binding` | Phase P Pure Logic | ✅ |
| 227 | `test_irq_route_correctness_logic` | Phase P Pure Logic | ✅ |
| 228 | `test_watchdog_should_fault_violated` | Phase P Pure Logic | ✅ |
| 229 | `test_watchdog_should_not_fault_within_interval` | Phase P Pure Logic | ✅ |
| 230 | `timer_tick_count_accessor` | Scheduler | ✅ |
| 231 | `trapframe_alignment_is_16` | TrapFrame Layout | ✅ |
| 232 | `trapframe_field_offsets` | TrapFrame Layout | ✅ |
| 233 | `trapframe_size_is_288` | TrapFrame Layout | ✅ |
| 234 | `trapframe_zeroed_is_valid` | TrapFrame Layout | ✅ |
| 235 | `uart_print_dec_nonzero` | KernelCell / Logging / UART | ✅ |
| 236 | `uart_print_dec_zero` | KernelCell / Logging / UART | ✅ |
| 237 | `uart_print_empty_and_nonempty` | KernelCell / Logging / UART | ✅ |
| 238 | `uart_print_hex_basic` | KernelCell / Logging / UART | ✅ |
| 239 | `validate_write_before_ram` | SYS_WRITE Validation | ✅ |
| 240 | `validate_write_end_of_ram` | SYS_WRITE Validation | ✅ |
| 241 | `validate_write_exactly_256` | SYS_WRITE Validation | ✅ |
| 242 | `validate_write_null_ptr` | SYS_WRITE Validation | ✅ |
| 243 | `validate_write_over_256` | SYS_WRITE Validation | ✅ |
| 244 | `validate_write_past_ram_end` | SYS_WRITE Validation | ✅ |
| 245 | `validate_write_spans_boundary` | SYS_WRITE Validation | ✅ |
| 246 | `validate_write_start_of_ram` | SYS_WRITE Validation | ✅ |
| 247 | `validate_write_uart_mmio` | SYS_WRITE Validation | ✅ |
| 248 | `validate_write_valid_ptr_in_ram` | SYS_WRITE Validation | ✅ |
| 249 | `validate_write_wrapping_overflow` | SYS_WRITE Validation | ✅ |
| 250 | `validate_write_zero_length` | SYS_WRITE Validation | ✅ |

### Tóm tắt theo nhóm

| Nhóm | Pass | Fail | Tổng |
|---|---|---|---|
| TrapFrame Layout | 4 | 0 | 4 |
| MMU Descriptors | 19 | 0 | 19 |
| SYS_WRITE Validation | 12 | 0 | 12 |
| Scheduler | 30 | 0 | 30 |
| IPC | 25 | 0 | 25 |
| Capabilities | 35 | 0 | 35 |
| Notifications | 7 | 0 | 7 |
| Grants | 16 | 0 | 16 |
| IRQ Routing | 15 | 0 | 15 |
| Address Space | 10 | 0 | 10 |
| Device Map | 4 | 0 | 4 |
| ELF Parser | 12 | 0 | 12 |
| ELF Loader | 8 | 0 | 8 |
| Multi-ELF / Misc | 1 | 0 | 1 |
| KernelCell / Logging / UART | 11 | 0 | 11 |
| L6 Integration | 6 | 0 | 6 |
| Phase P Pure Logic | 9 | 0 | 9 |
| Sender Queue (IPC) | 5 | 0 | 5 |
| Timer | 1 | 0 | 1 |
| **Tổng** | **250** | **0** | **250** |

---

## 2. QEMU Boot Integration Test

**Lệnh:** `.\tests\qemu_boot_test.ps1`
**Kết quả:** 32/32 checkpoints passed

### Checkpoints

| # | Checkpoint | Pattern | Kết quả |
|---|---|---|---|
| 1 | Kernel boot message | `[AegisOS] boot` | ✅ |
| 2 | MMU enabled | `[AegisOS] MMU enabled` | ✅ |
| 3 | W^X enforced | `[AegisOS] W^X enforced` | ✅ |
| 4 | Exceptions ready | `[AegisOS] exceptions ready` | ✅ |
| 5 | Scheduler ready | `[AegisOS] scheduler ready` | ✅ |
| 6 | Capabilities assigned | `[AegisOS] capabilities assigned` | ✅ |
| 7 | Priority scheduler | `[AegisOS] priority scheduler` | ✅ |
| 8 | Time budget enforcement | `[AegisOS] time budget` | ✅ |
| 9 | Watchdog heartbeat | `[AegisOS] watchdog` | ✅ |
| 10 | Notification ready | `[AegisOS] notification` | ✅ |
| 11 | Grant system ready | `[AegisOS] grant` | ✅ |
| 12 | IRQ routing ready | `[AegisOS] IRQ routing` | ✅ |
| 13 | Device MMIO ready | `[AegisOS] device MMIO` | ✅ |
| 14 | Address spaces assigned | `[AegisOS] address spaces` | ✅ |
| 15 | Arch separation L1 | `[AegisOS] arch separation L1` | ✅ |
| 16 | Arch separation L2 | `[AegisOS] arch separation L2` | ✅ |
| 17 | ELF64 parser ready | `[AegisOS] ELF64 parser` | ✅ |
| 18 | ELF loader ready | `[AegisOS] ELF loader` | ✅ |
| 19 | ELF task 2 loaded | `[AegisOS] ELF task 2` | ✅ |
| 20 | ELF task 3 loaded | `[AegisOS] ELF task 3` | ✅ |
| 21 | ELF task 4 loaded | `[AegisOS] ELF task 4` | ✅ |
| 22 | Multi-ELF complete | `[AegisOS] multi-ELF` | ✅ |
| 23 | Timer started | `[AegisOS] timer` | ✅ |
| 24 | Enhanced panic handler | `[AegisOS] panic handler` | ✅ |
| 25 | klog ready | `[AegisOS] klog` | ✅ |
| 26 | Safety audit complete | `[AegisOS] safety audit` | ✅ |
| 27 | Bootstrap into EL0 | `[AegisOS] bootstrap` | ✅ |
| 28 | UART Driver ready | `UART driver` | ✅ |
| 29 | L5 ELF task output | `L5:ELF` | ✅ |
| 30 | Task 2 exited | `task 2 exited` | ✅ |
| 31 | Sensor initialized | `sensor` | ✅ |
| 32 | Client uses driver | `client` | ✅ |

---

## 3. Kani Formal Verification

**Lệnh:** `docker exec -w /workspaces/aegis aegis-dev cargo kani --tests`
**Container:** aegis-dev (Up 4 hours) — cargo-kani 0.67.0, CBMC 6.8.0
**Kết quả:** 18/18 proofs verified

### Proofs

| # | Module | Harness | Kết quả |
|---|---|---|---|
| 1 | cap.rs | `cap_check_bitwise_correctness` | ✅ |
| 2 | cap.rs | `cap_for_syscall_no_panic_and_bounded` | ✅ |
| 3 | sched.rs | `schedule_idle_guarantee` | ✅ |
| 4 | sched.rs | `restart_task_state_machine` | ✅ |
| 5 | ipc.rs | `ipc_queue_no_overflow` | ✅ |
| 6 | ipc.rs | `ipc_message_integrity` | ✅ |
| 7 | ipc.rs | `ipc_cleanup_completeness` | ✅ |
| 8 | mmu.rs | `pt_index_in_bounds` | ✅ |
| 9 | mmu.rs | `pt_index_no_task_aliasing` | ✅ |
| 10 | qemu_virt.rs | `elf_load_addr_no_overlap` | ✅ |
| 11 | grant.rs | `grant_no_overlap` | ✅ |
| 12 | grant.rs | `grant_cleanup_completeness` | ✅ |
| 13 | grant.rs | `grant_slot_exhaustion_safe` | ✅ |
| 14 | irq.rs | `irq_route_correctness` | ✅ |
| 15 | irq.rs | `irq_no_orphaned_binding` | ✅ |
| 16 | irq.rs | `irq_bind_no_duplicate_intid` | ✅ |
| 17 | sched.rs | `watchdog_violation_detection` | ✅ |
| 18 | sched.rs | `budget_epoch_reset_fairness` | ✅ |

---

## 4. Tổng kết

| Loại test | Pass | Fail | Tổng |
|---|---|---|---|
| Host Unit Tests | 250 | 0 | 250 |
| QEMU Boot Checkpoints | 32 | 0 | 32 |
| Kani Formal Proofs | 18 | 0 | 18 |
| **Tổng** | **300** | **0** | **300** |

### Trạng thái: ✅ ALL PASS

> Tất cả kiểm thử đều đạt. Kernel sẵn sàng cho phase tiếp theo.
